{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LUCKY\\\\Downloads\\\\Medicine-Prediction-System - Copy\\\\frontend\\\\src\\\\components\\\\PrivateRoute.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../context/AuthContext';\nimport { Shield, AlertCircle } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PrivateRoute = ({\n  children,\n  requiredRole = null,\n  allowedRoles = []\n}) => {\n  _s();\n  const {\n    user,\n    isAuthenticated,\n    loading\n  } = useAuth();\n  const location = useLocation();\n\n  // Show loading spinner while authentication is being checked\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center h-64\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"ml-2 text-gray-600\",\n        children: \"Checking authentication...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 15,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated || !user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Check role-based access\n  if (requiredRole && user.role !== requiredRole) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Shield, {\n          className: \"w-16 h-16 text-red-400 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-gray-900 mb-2\",\n          children: \"Access Denied\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-4\",\n          children: [\"You need \", requiredRole, \" privileges to access this page.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: [\"Current role: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium capitalize\",\n            children: user.role\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 36,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 35,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Check if user role is in allowed roles list\n  if (allowedRoles.length > 0 && !allowedRoles.includes(user.role)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(AlertCircle, {\n          className: \"w-16 h-16 text-yellow-400 mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-gray-900 mb-2\",\n          children: \"Insufficient Permissions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mb-4\",\n          children: \"You don't have the required permissions to access this page.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: [\"Required roles: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium\",\n            children: allowedRoles.join(', ')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-gray-500\",\n          children: [\"Your role: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium capitalize\",\n            children: user.role\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  }\n\n  // User has proper authentication and role, render the protected component\n  return children;\n};\n\n// HOC for easier usage\n_s(PrivateRoute, \"pvp8inAvQHEb0BVUe3eLqKvyMMQ=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = PrivateRoute;\nexport const withRoleCheck = (Component, requiredRole = null, allowedRoles = []) => {\n  return props => /*#__PURE__*/_jsxDEV(PrivateRoute, {\n    requiredRole: requiredRole,\n    allowedRoles: allowedRoles,\n    children: /*#__PURE__*/_jsxDEV(Component, {\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n\n// Specific role-based route components\nexport const AdminRoute = ({\n  children\n}) => /*#__PURE__*/_jsxDEV(PrivateRoute, {\n  requiredRole: \"admin\",\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 79,\n  columnNumber: 3\n}, this);\n_c2 = AdminRoute;\nexport const DoctorRoute = ({\n  children\n}) => /*#__PURE__*/_jsxDEV(PrivateRoute, {\n  allowedRoles: ['doctor', 'admin'],\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 83,\n  columnNumber: 3\n}, this);\n_c3 = DoctorRoute;\nexport const PatientRoute = ({\n  children\n}) => /*#__PURE__*/_jsxDEV(PrivateRoute, {\n  allowedRoles: ['patient', 'doctor', 'admin'],\n  children: children\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 87,\n  columnNumber: 3\n}, this);\n_c4 = PatientRoute;\nexport default PrivateRoute;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"PrivateRoute\");\n$RefreshReg$(_c2, \"AdminRoute\");\n$RefreshReg$(_c3, \"DoctorRoute\");\n$RefreshReg$(_c4, \"PatientRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","Shield","AlertCircle","jsxDEV","_jsxDEV","PrivateRoute","children","requiredRole","allowedRoles","_s","user","isAuthenticated","loading","location","className","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","role","length","includes","join","_c","withRoleCheck","Component","props","AdminRoute","_c2","DoctorRoute","_c3","PatientRoute","_c4","$RefreshReg$"],"sources":["C:/Users/LUCKY/Downloads/Medicine-Prediction-System - Copy/frontend/src/components/PrivateRoute.js"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { Shield, AlertCircle } from 'lucide-react';\r\n\r\nconst PrivateRoute = ({ children, requiredRole = null, allowedRoles = [] }) => {\r\n  const { user, isAuthenticated, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  // Show loading spinner while authentication is being checked\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <span className=\"ml-2 text-gray-600\">Checking authentication...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Redirect to login if not authenticated\r\n  if (!isAuthenticated || !user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  // Check role-based access\r\n  if (requiredRole && user.role !== requiredRole) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"text-center\">\r\n          <Shield className=\"w-16 h-16 text-red-400 mx-auto mb-4\" />\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Access Denied</h2>\r\n          <p className=\"text-gray-600 mb-4\">\r\n            You need {requiredRole} privileges to access this page.\r\n          </p>\r\n          <p className=\"text-sm text-gray-500\">\r\n            Current role: <span className=\"font-medium capitalize\">{user.role}</span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Check if user role is in allowed roles list\r\n  if (allowedRoles.length > 0 && !allowedRoles.includes(user.role)) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"text-center\">\r\n          <AlertCircle className=\"w-16 h-16 text-yellow-400 mx-auto mb-4\" />\r\n          <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Insufficient Permissions</h2>\r\n          <p className=\"text-gray-600 mb-4\">\r\n            You don't have the required permissions to access this page.\r\n          </p>\r\n          <p className=\"text-sm text-gray-500\">\r\n            Required roles: <span className=\"font-medium\">{allowedRoles.join(', ')}</span>\r\n          </p>\r\n          <p className=\"text-sm text-gray-500\">\r\n            Your role: <span className=\"font-medium capitalize\">{user.role}</span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // User has proper authentication and role, render the protected component\r\n  return children;\r\n};\r\n\r\n// HOC for easier usage\r\nexport const withRoleCheck = (Component, requiredRole = null, allowedRoles = []) => {\r\n  return (props) => (\r\n    <PrivateRoute requiredRole={requiredRole} allowedRoles={allowedRoles}>\r\n      <Component {...props} />\r\n    </PrivateRoute>\r\n  );\r\n};\r\n\r\n// Specific role-based route components\r\nexport const AdminRoute = ({ children }) => (\r\n  <PrivateRoute requiredRole=\"admin\">{children}</PrivateRoute>\r\n);\r\n\r\nexport const DoctorRoute = ({ children }) => (\r\n  <PrivateRoute allowedRoles={['doctor', 'admin']}>{children}</PrivateRoute>\r\n);\r\n\r\nexport const PatientRoute = ({ children }) => (\r\n  <PrivateRoute allowedRoles={['patient', 'doctor', 'admin']}>{children}</PrivateRoute>\r\n);\r\n\r\nexport default PrivateRoute;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}